import{d as D,k as S,b as T,l as E,m as k,r as N,Q as R,f as o,c as t,t as n,h as r,P as V,M as $,e as x,o as s,z as i,J as G,I as O,B as C,K as p,F as h,_ as A}from"./index-3yaHMBuR.js";import{i as B,j as M}from"./traffic-kHQqjcnF.js";import{S as P,a as Y,s as f}from"./SearchUtil-x3tT_5M1.js";import"./request-8fqjBntA.js";const F={class:"__container_traffic_config_index"},J=["onClick"],K=D({__name:"index",setup(j){S(e=>({"2f10a2da":r(V)}));const c=T(),v=E(k.PROVIDE_INJECT_KEY);v.dynamicConfigForm=N({});let I=[{title:"ruleName",key:"ruleName",dataIndex:"ruleName",sorter:(e,a)=>f(e.appName,a.appName),width:200,ellipsis:!0},{title:"ruleGranularity",key:"ruleGranularity",dataIndex:"ruleGranularity",render:(e,a)=>a.isService?"服务":"应用",width:100,sorter:(e,a)=>f(e.instanceNum,a.instanceNum)},{title:"createTime",key:"createTime",dataIndex:"createTime",width:200,sorter:(e,a)=>f(e.instanceNum,a.instanceNum)},{title:"enabled",key:"enabled",dataIndex:"enabled",render:(e,a)=>a.enabled?"是":"否",width:120,sorter:(e,a)=>f(e.instanceNum,a.instanceNum)},{title:"operation",key:"operation",dataIndex:"operation",width:200}];const l=N(new P([{label:"serviceGovernance",param:"serviceGovernance",placeholder:"typeRoutingRules",style:{width:"200px"}}],B,I)),g=()=>{c.push("/traffic/dynamicConfig/formview/_tmp/1")};R(async()=>{await l.onSearch()});const w=async e=>{await M({name:e.ruleName}),await l.onSearch()};return $(k.SEARCH_DOMAIN,l),(e,a)=>{const d=x("a-button"),b=x("a-popconfirm");return s(),o("div",F,[t(Y,{"search-domain":l},{customOperation:n(()=>[t(d,{type:"primary",onClick:g},{default:n(()=>[i("新增动态配置")]),_:1})]),bodyCell:n(({text:_,column:m,record:u})=>[m.dataIndex==="ruleName"?(s(),o("span",{key:0,class:"config-link",onClick:y=>r(c).push(`/traffic/dynamicConfig/formview/${u.ruleName}/0`)},[G("b",null,[t(r(O),{style:{"margin-bottom":"-2px"},icon:"material-symbols:attach-file-rounded"}),i(" "+C(_),1)])],8,J)):p("",!0),m.dataIndex==="ruleGranularity"?(s(),o(h,{key:1},[i(C(_?"服务":"应用"),1)],64)):p("",!0),m.dataIndex==="enabled"?(s(),o(h,{key:2},[i(C(_?"启用":"禁用"),1)],64)):p("",!0),m.dataIndex==="operation"?(s(),o(h,{key:3},[t(d,{type:"link",onClick:y=>r(c).push(`/traffic/dynamicConfig/formview/${u.ruleName}/0`)},{default:n(()=>[i("查看")]),_:2},1032,["onClick"]),t(d,{type:"link",onClick:y=>r(c).push(`/traffic/dynamicConfig/formview/${u.ruleName}/1`)},{default:n(()=>[i(" 修改 ")]),_:2},1032,["onClick"]),t(b,{title:"确认删除该动态配置？","ok-text":"Yes","cancel-text":"No",onConfirm:y=>w(u)},{default:n(()=>[t(d,{type:"link"},{default:n(()=>[i("删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):p("",!0)]),_:1},8,["search-domain"])])}}}),q=A(K,[["__scopeId","data-v-25acc517"]]);export{q as default};
