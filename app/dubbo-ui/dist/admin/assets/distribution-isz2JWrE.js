import{d as A,k as E,b as F,u as U,g as G,n as g,r as N,s as J,f,c as o,t as r,e as i,h as n,P as O,o as p,z as u,J as z,I as D,B as b,K as h,F as K,v as L,_ as M}from"./index-WfxyH1kR.js";import{g as Y}from"./service-DC2c1SVC.js";import{f as j}from"./DateUtil-ZKMmY9aQ.js";import"./request-2cLtQ4vm.js";const q={class:"__container_services_tabs_distribution"},H=["onClick"],Q=["onClick"],W=A({__name:"distribution",setup(X){E(e=>({"5826d13c":n(O)}));const k=F(),C=U(),{appContext:{config:{globalProperties:S}}}=G(),y=g(""),P=N([{label:"不指定",value:""},{label:"version=1.0.0",value:"version=1.0.0"},{label:"group=group1",value:"group=group1"},{label:"version=1.0.0,group=group1",value:"version=1.0.0,group=group1"}]);g(P[0].value);const x=g("provider"),R=[{title:"应用名",dataIndex:"appName",width:"20%",customCell:(e,a)=>a===0?{rowSpan:d.value.length}:{rowSpan:0}},{title:"实例数",dataIndex:"instanceNum",width:"15%",customCell:(e,a)=>a===0?{rowSpan:d.value.length}:{rowSpan:0}},{title:"实例名",dataIndex:"instanceName",width:"25%",ellipsis:!0},{title:"RPC端口",dataIndex:"rpcPort",width:"8%"},{title:"超时时间",dataIndex:"timeOut",width:"10%"},{title:"重试次数",dataIndex:"retryNum",width:"10%"},{title:"标签",dataIndex:"label",width:"15%"}],d=g([]),t=N({total:0,pageSize:10,current:1,pageOffset:0,showTotal:e=>S.$t("searchDomain.total")+": "+e+" "+S.$t("searchDomain.unit")}),w=async()=>{var m,v,c;let e={serviceName:(m=C.params)==null?void 0:m.pathId,side:x.value,version:((v=C.params)==null?void 0:v.version)||"",group:((c=C.params)==null?void 0:c.group)||"",pageOffset:t.pageOffset,pageSize:t.pageSize};const{data:{list:a,pageInfo:_}}=await Y(e);d.value=a,t.total=_.Total};w();const I=J.debounce(w,300),V=e=>{t.pageSize=e.pageSize||10,t.current=e.current||1,t.pageOffset=(t.current-1)*t.pageSize,I()};return(e,a)=>{const _=i("a-radio-button"),m=i("a-radio-group"),v=i("a-input-search"),c=i("a-flex"),B=i("a-tag"),T=i("a-table");return p(),f("div",q,[o(c,{vertical:""},{default:r(()=>[o(c,{class:"service-filter"},{default:r(()=>[o(m,{value:x.value,"onUpdate:value":a[0]||(a[0]=s=>x.value=s),"button-style":"solid",onClick:n(I)},{default:r(()=>[o(_,{value:"provider"},{default:r(()=>[u("生产者")]),_:1}),o(_,{value:"consumer"},{default:r(()=>[u("消费者")]),_:1})]),_:1},8,["value","onClick"]),o(v,{value:y.value,"onUpdate:value":a[1]||(a[1]=s=>y.value=s),placeholder:"搜索应用，ip，支持前缀搜索",class:"service-filter-input",onSearch:n(I),"enter-button":""},null,8,["value","onSearch"])]),_:1}),o(T,{columns:R,"data-source":d.value,scroll:{y:"45vh"},pagination:t,onChange:V},{bodyCell:r(({column:s,text:l})=>[s.dataIndex==="appName"?(p(),f("span",{key:0,class:"link",onClick:$=>n(k).push("/resources/applications/detail/"+l)},[z("b",null,[o(n(D),{style:{"margin-bottom":"-2px"},icon:"material-symbols:attach-file-rounded"}),u(" "+b(l),1)])],8,H)):h("",!0),s.dataIndex==="instanceName"?(p(),f("span",{key:1,class:"link",onClick:$=>n(k).push("/resources/instances/detail/"+l)},[z("b",null,[o(n(D),{style:{"margin-bottom":"-2px"},icon:"material-symbols:attach-file-rounded"}),u(" "+b(l),1)])],8,Q)):h("",!0),s.dataIndex==="timeOut"?(p(),f(K,{key:2},[u(b(n(j)(l)),1)],64)):h("",!0),s.dataIndex==="label"?(p(),L(B,{key:3,color:n(O)},{default:r(()=>[u(b(l),1)]),_:2},1032,["color"])):h("",!0)]),_:1},8,["data-source","pagination"])]),_:1})])}}}),oe=M(W,[["__scopeId","data-v-88cedab7"]]);export{oe as default};
