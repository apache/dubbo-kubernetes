import{d as R,k as b,r as w,Q as S,f as l,c as t,t as n,h as r,P as g,M as V,e as x,o as c,R as m,z as o,J as $,I as B,B as k,K as p,F as h,m as G,_ as T}from"./index-WfxyH1kR.js";import{s as D,d as E}from"./traffic-jiWu3d0C.js";import{S as O,a as A,s as _}from"./SearchUtil-nZW97Iet.js";import"./request-2cLtQ4vm.js";const F={class:"__container_resources_application_index"},M=["onClick"],P=R({__name:"index",setup(Y){b(e=>({"6edc48db":r(g)}));let N=[{title:"ruleName",key:"ruleName",dataIndex:"ruleName",sorter:(e,a)=>_(e.appName,a.appName),width:140},{title:"ruleGranularity",key:"ruleGranularity",dataIndex:"ruleGranularity",render:(e,a)=>a.isService?"服务":"应用",width:100,sorter:(e,a)=>_(e.instanceNum,a.instanceNum)},{title:"createTime",key:"createTime",dataIndex:"createTime",width:120,sorter:(e,a)=>_(e.instanceNum,a.instanceNum)},{title:"enable",key:"enable",dataIndex:"enable",render:(e,a)=>a.enable?"是":"否",width:120,sorter:(e,a)=>_(e.instanceNum,a.instanceNum)},{title:"operation",key:"operation",dataIndex:"operation",width:200}];const d=w(new O([{label:"serviceGovernance",param:"serviceGovernance",placeholder:"typeRoutingRules",style:{width:"200px"}}],D,N)),C=async e=>{(await E(e)).code===200&&await d.onSearch()};S(()=>{d.onSearch()});const v=e=>{C(e)};return V(G.SEARCH_DOMAIN,d),(e,a)=>{const u=x("a-button"),I=x("a-popconfirm");return c(),l("div",F,[t(A,{"search-domain":d},{customOperation:n(()=>[t(u,{type:"primary",onClick:a[0]||(a[0]=f=>r(m).push("/traffic/addRoutingRule/addByFormView"))},{default:n(()=>[o("新增条件路由规则 ")]),_:1})]),bodyCell:n(({text:f,column:i,record:s})=>[i.dataIndex==="ruleName"?(c(),l("span",{key:0,class:"rule-link",onClick:y=>r(m).push(`formview/${s[i.key]}`)},[$("b",null,[t(r(B),{style:{"margin-bottom":"-2px"},icon:"material-symbols:attach-file-rounded"}),o(" "+k(f),1)])],8,M)):p("",!0),i.dataIndex==="ruleGranularity"?(c(),l(h,{key:1},[o(k(s.scope==="service"?"服务":"应用"),1)],64)):p("",!0),i.dataIndex==="enable"?(c(),l(h,{key:2},[o(k(f?"启用":"禁用"),1)],64)):p("",!0),i.dataIndex==="operation"?(c(),l(h,{key:3},[t(u,{type:"link",onClick:y=>r(m).push(`formview/${s.ruleName}`)},{default:n(()=>[o(" 查看 ")]),_:2},1032,["onClick"]),t(u,{type:"link",onClick:y=>r(m).push(`/traffic/updateRoutingRule/updateByFormView/${s.ruleName}`)},{default:n(()=>[o(" 修改 ")]),_:2},1032,["onClick"]),t(I,{title:"确认删除该条件路由规则？","ok-text":"Yes","cancel-text":"No",onConfirm:y=>v(s.ruleName)},{default:n(()=>[t(u,{type:"link"},{default:n(()=>[o(" 删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):p("",!0)]),_:1},8,["search-domain"])])}}}),L=T(P,[["__scopeId","data-v-cf2a4e0b"]]);export{L as default};
