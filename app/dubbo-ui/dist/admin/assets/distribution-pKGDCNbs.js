import{d as A,k as E,b as F,u as U,g as G,n as v,r as O,s as J,f as g,c as a,t as n,e as i,h as t,P as w,o as p,z as c,J as z,I as D,B as b,K as f,F as K,v as L,_ as M}from"./index-vn9A3gdz.js";import{g as Y}from"./service-IEKUxg3O.js";import{f as j}from"./DateUtil-DJHEWObA.js";import"./request-9tAEjvni.js";const q={class:"__container_services_tabs_distribution"},H=["onClick"],Q=["onClick"],W=A({__name:"distribution",setup(X){E(o=>({b3606d0c:t(w)}));const x=F(),h=U(),{appContext:{config:{globalProperties:y}}}=G(),I=v(""),P=O([{label:"不指定",value:""},{label:"version=1.0.0",value:"version=1.0.0"},{label:"group=group1",value:"group=group1"},{label:"version=1.0.0,group=group1",value:"version=1.0.0,group=group1"}]);v(P[0].value);const C=v("provider"),R=[{title:"应用名",dataIndex:"appName",width:"20%"},{title:"实例名",dataIndex:"instanceName",width:"25%",ellipsis:!0},{title:"RPC端口",dataIndex:"rpcPort",width:"8%"},{title:"超时时间",dataIndex:"timeOut",width:"10%"},{title:"重试次数",dataIndex:"retryNum",width:"10%"}],S=v([]),e=O({total:0,pageSize:10,current:1,pageOffset:0,showTotal:o=>y.$t("searchDomain.total")+": "+o+" "+y.$t("searchDomain.unit")}),N=async()=>{var _,m,u;let o={serviceName:(_=h.params)==null?void 0:_.pathId,side:C.value,version:((m=h.params)==null?void 0:m.version)||"",group:((u=h.params)==null?void 0:u.group)||"",pageOffset:e.pageOffset,pageSize:e.pageSize};const{data:{list:r,pageInfo:d}}=await Y(o);S.value=r,e.total=d.Total};N();const k=J.debounce(N,300),V=o=>{e.pageSize=o.pageSize||10,e.current=o.current||1,e.pageOffset=(e.current-1)*e.pageSize,k()};return(o,r)=>{const d=i("a-radio-button"),_=i("a-radio-group"),m=i("a-input-search"),u=i("a-flex"),B=i("a-tag"),T=i("a-table");return p(),g("div",q,[a(u,{vertical:""},{default:n(()=>[a(u,{class:"service-filter"},{default:n(()=>[a(_,{value:C.value,"onUpdate:value":r[0]||(r[0]=s=>C.value=s),"button-style":"solid",onClick:t(k)},{default:n(()=>[a(d,{value:"provider"},{default:n(()=>[c("生产者")]),_:1}),a(d,{value:"consumer"},{default:n(()=>[c("消费者")]),_:1})]),_:1},8,["value","onClick"]),a(m,{value:I.value,"onUpdate:value":r[1]||(r[1]=s=>I.value=s),placeholder:"搜索应用，ip，支持前缀搜索",class:"service-filter-input",onSearch:t(k),"enter-button":""},null,8,["value","onSearch"])]),_:1}),a(T,{columns:R,"data-source":S.value,scroll:{y:"45vh"},pagination:e,onChange:V},{bodyCell:n(({column:s,text:l})=>[s.dataIndex==="appName"?(p(),g("span",{key:0,class:"link",onClick:$=>t(x).push("/resources/applications/detail/"+l)},[z("b",null,[a(t(D),{style:{"margin-bottom":"-2px"},icon:"material-symbols:attach-file-rounded"}),c(" "+b(l),1)])],8,H)):f("",!0),s.dataIndex==="instanceName"?(p(),g("span",{key:1,class:"link",onClick:$=>t(x).push("/resources/instances/detail/"+l)},[z("b",null,[a(t(D),{style:{"margin-bottom":"-2px"},icon:"material-symbols:attach-file-rounded"}),c(" "+b(l),1)])],8,Q)):f("",!0),s.dataIndex==="timeOut"?(p(),g(K,{key:2},[c(b(t(j)(l)),1)],64)):f("",!0),s.dataIndex==="label"?(p(),L(B,{key:3,color:t(w)},{default:n(()=>[c(b(l),1)]),_:2},1032,["color"])):f("",!0)]),_:1},8,["data-source","pagination"])]),_:1})])}}}),oe=M(W,[["__scopeId","data-v-83d91bb7"]]);export{oe as default};
