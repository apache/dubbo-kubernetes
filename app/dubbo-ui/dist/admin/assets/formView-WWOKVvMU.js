import{u as F}from"./index-PjsB4j44.js";import{d as L,g as H,u as J,n as D,r as K,a as Q,Q as U,f as $,c as o,t as e,e as r,o as i,z as l,B as s,v as f,h as y,a9 as X,aa as Y,J as g,W as k,K as I,F as O,y as B,X as Z,G as ee,H as te,_ as oe}from"./index-3yaHMBuR.js";import{g as ae}from"./traffic-kHQqjcnF.js";import"./request-8fqjBntA.js";const A=v=>(ee("data-v-756820e8"),v=v(),te(),v),le={class:"__container_routingRule_detail"},ne=A(()=>g("p",null,"修改时间: 2024/3/20 15:20:31",-1)),se=A(()=>g("p",null,"版本号: xo842xqpx834",-1)),re=L({__name:"formView",setup(v){const{appContext:{config:{globalProperties:x}}}=H(),M=J(),_=D(!1),N=D(8),z=F().toClipboard;function w(t){Z.success(x.$t("messageDomain.success.copy")),z(t)}const a=K({configVersion:"v3.0",scope:"service",key:"org.apache.dubbo.samples.UserService",enabled:!0,runtime:!0,force:!1,conditions:["=>host!=192.168.0.68"],group:"default",version:"1.0.0"}),j=Q(()=>{const t=a.key.split(":");return t[0]?t[0]:""}),S=D([]),W=D([]);async function E(){var n;let t=await ae((n=M.params)==null?void 0:n.ruleName);console.log(t),(t==null?void 0:t.code)===200&&(Object.assign(a,(t==null?void 0:t.data)||{}),a.conditions.forEach((d,h)=>{var C,p;const m=d.split(" => "),c=(C=m[1])==null?void 0:C.split(" & "),b=(p=m[0])==null?void 0:p.split(" & ");S.value=S.value.concat(b),W.value=W.value.concat(c)}))}const G=()=>{var n;const t=(n=M.params)==null?void 0:n.ruleName;if(t&&a.scope==="service"){const d=t==null?void 0:t.split(":");a.version=d[1],a.group=d[2].split(".")[0]}};return U(async()=>{await E(),G()}),(t,n)=>{const d=r("a-typography-title"),h=r("a-button"),m=r("a-flex"),c=r("a-descriptions-item"),b=r("a-typography-paragraph"),C=r("a-descriptions"),p=r("a-card"),T=r("a-row"),P=r("a-tag"),R=r("a-space"),q=r("a-col");return i(),$("div",le,[o(m,{style:{width:"100%"}},{default:e(()=>[o(q,{span:_.value?24-N.value:24,class:"left"},{default:e(()=>[o(T,null,{default:e(()=>[o(m,{justify:"space-between",style:{width:"100%"}},{default:e(()=>[o(d,{level:3},{default:e(()=>[l(" 基础信息")]),_:1}),o(h,{type:"text",style:{color:"#0a90d5"},onClick:n[0]||(n[0]=u=>_.value=!_.value)},{default:e(()=>[l(s(t.$t("flowControlDomain.versionRecords"))+" ",1),_.value?(i(),f(y(Y),{key:1})):(i(),f(y(X),{key:0}))]),_:1})]),_:1}),o(p,{class:"_detail"},{default:e(()=>[o(C,{column:2,layout:"vertical",title:""},{default:e(()=>[o(c,{label:t.$t("flowControlDomain.ruleName"),labelStyle:{fontWeight:"bold"}},{default:e(()=>[g("p",{class:"description-item-content with-card",onClick:n[1]||(n[1]=u=>w(a.key))},[l(s(a.key)+" ",1),o(y(k))])]),_:1},8,["label"]),o(c,{label:t.$t("flowControlDomain.ruleGranularity"),labelStyle:{fontWeight:"bold"}},{default:e(()=>[o(b,null,{default:e(()=>[l(s(a.scope),1)]),_:1})]),_:1},8,["label"]),a.scope=="service"?(i(),f(c,{key:0,label:"版本",labelStyle:{fontWeight:"bold"}},{default:e(()=>[l(s(a.scope)+" ",1),g("p",{class:"description-item-content with-card",onClick:n[2]||(n[2]=u=>w(a.version))},[l(s(a.version)+" ",1),o(y(k))])]),_:1})):I("",!0),a.scope=="service"?(i(),f(c,{key:1,label:"分组",labelStyle:{fontWeight:"bold"}},{default:e(()=>[g("p",{class:"description-item-content with-card",onClick:n[3]||(n[3]=u=>w(a.group))},[l(s(a.group)+" ",1),o(y(k))])]),_:1})):I("",!0),o(c,{label:t.$t("flowControlDomain.actionObject"),labelStyle:{fontWeight:"bold"}},{default:e(()=>[g("p",{class:"description-item-content with-card",onClick:n[4]||(n[4]=u=>w(j.value))},[l(s(j.value)+" ",1),o(y(k))])]),_:1},8,["label"]),o(c,{label:t.$t("flowControlDomain.faultTolerantProtection"),labelStyle:{fontWeight:"bold"}},{default:e(()=>[o(b,null,{default:e(()=>[l(s(a.force?t.$t("flowControlDomain.closed"):t.$t("flowControlDomain.opened")),1)]),_:1})]),_:1},8,["label"]),o(c,{label:t.$t("flowControlDomain.enabledState"),labelStyle:{fontWeight:"bold"}},{default:e(()=>[o(b,null,{default:e(()=>[l(s(a.enabled?t.$t("flowControlDomain.enabled"):t.$t("flowControlDomain.disabled")),1)]),_:1})]),_:1},8,["label"]),o(c,{label:t.$t("flowControlDomain.runTimeEffective"),labelStyle:{fontWeight:"bold"}},{default:e(()=>[o(b,null,{default:e(()=>[l(s(a.runtime?t.$t("flowControlDomain.opened"):t.$t("flowControlDomain.closed")),1)]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1}),o(p,{style:{"margin-top":"10px"},class:"_detail"},{default:e(()=>[o(R,{align:"start",style:{width:"100%"}},{default:e(()=>[o(d,{level:5},{default:e(()=>[l(s(t.$t("flowControlDomain.requestParameterMatching"))+": ",1)]),_:1}),o(R,{align:"center",direction:"horizontal",size:"middle"},{default:e(()=>[(i(!0),$(O,null,B(S.value,(u,V)=>(i(),f(P,{key:V,color:"#2db7f5"},{default:e(()=>[l(s(u),1)]),_:2},1024))),128))]),_:1})]),_:1}),o(R,{align:"start",style:{width:"100%"}},{default:e(()=>[o(d,{level:5},{default:e(()=>[l(s(t.$t("flowControlDomain.addressSubsetMatching"))+": ",1)]),_:1}),(i(!0),$(O,null,B(W.value,(u,V)=>(i(),f(P,{key:V,color:"#87d068"},{default:e(()=>[l(s(u),1)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1},8,["span"]),o(q,{span:_.value?N.value:0,class:"right"},{default:e(()=>[_.value?(i(),f(p,{key:0,class:"sliderBox"},{default:e(()=>[(i(),$(O,null,B(2,u=>o(p,{key:u},{default:e(()=>[ne,se,o(m,{justify:"flex-end"},{default:e(()=>[o(h,{type:"text",style:{color:"#0a90d5"}},{default:e(()=>[l("查看")]),_:1}),o(h,{type:"text",style:{color:"#0a90d5"}},{default:e(()=>[l("回滚")]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})):I("",!0)]),_:1},8,["span"])]),_:1})])}}}),pe=oe(re,[["__scopeId","data-v-756820e8"]]);export{pe as default};
