import{_ as N}from"./MonacoEditor.vue_vue_type_script_setup_true_lang-JvHrh8S3.js";import{g as A,u as S}from"./traffic-yeaU89i2.js";import{d as L,u as M,n as v,r as O,Q as P,v as y,t as e,e as u,o as b,c as a,z as t,h as w,a9 as Y,aa as z,J as n,K as U,G as $,H as G,_ as H}from"./index-vn9A3gdz.js";import{y as C}from"./js-yaml-lTHa-xT-.js";import"./request-9tAEjvni.js";const r=_=>($("data-v-e46a45c3"),_=_(),G(),_),J={class:"editorBox"},K={class:"bottom-action-footer"},Q=r(()=>n("br",null,null,-1)),T=r(()=>n("br",null,null,-1)),j=r(()=>n("br",null,null,-1)),q=r(()=>n("br",null,null,-1)),E=r(()=>n("br",null,null,-1)),F=r(()=>n("br",null,null,-1)),W=L({__name:"updateByYAMLView",setup(_){const g=M(),B=v(!1),c=v(!1),h=v(8);O({configVersion:"v3.0",scope:"service",key:"org.apache.dubbo.samples.UserService",enabled:!0,runtime:!0,force:!1,conditions:["=>host!=192.168.0.68"]});const p=v(`configVersion: v3.0
force: false
enabled: true
runtime: false
key: shop-detail
tags:
  - name: gray
    match:
      - key: env
        value:
          exact: gray`);async function x(){var s,l,d;let o=await A((s=g.params)==null?void 0:s.ruleName);if((o==null?void 0:o.code)===200){const i=(l=g.params)==null?void 0:l.ruleName;if(i&&o.data.scope==="service"){const f=i==null?void 0:i.split(":");o.data.configVersion=f[1],o.data.group=(d=f[2])==null?void 0:d.split(".")[0]}p.value=C.dump(o==null?void 0:o.data)}}const D=async()=>{var l;const o=C.load(p.value);(await S((l=g.params)==null?void 0:l.ruleName,o)).code===200&&await x()};return P(()=>{x()}),(o,s)=>{const l=u("a-button"),d=u("a-flex"),i=u("a-space"),f=u("a-affix"),V=u("a-col"),m=u("a-descriptions-item"),I=u("a-descriptions"),k=u("a-card");return b(),y(k,null,{default:e(()=>[a(d,{style:{width:"100%"}},{default:e(()=>[a(V,{span:c.value?24-h.value:24,class:"left"},{default:e(()=>[a(d,{vertical:"",align:"end"},{default:e(()=>[a(l,{type:"text",style:{color:"#0a90d5"},onClick:s[0]||(s[0]=R=>c.value=!c.value)},{default:e(()=>[t(" 字段说明 "),c.value?(b(),y(w(z),{key:1})):(b(),y(w(Y),{key:0}))]),_:1}),n("div",J,[a(N,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=R=>p.value=R),theme:"vs-dark",height:500,language:"yaml",readonly:B.value},null,8,["modelValue","readonly"])])]),_:1}),a(f,{"offset-bottom":10},{default:e(()=>[n("div",K,[a(i,{align:"center",size:"large"},{default:e(()=>[a(l,{type:"primary",onClick:D},{default:e(()=>[t(" 确认")]),_:1}),a(l,null,{default:e(()=>[t(" 取消")]),_:1})]),_:1})])]),_:1})]),_:1},8,["span"]),a(V,{span:c.value?h.value:0,class:"right"},{default:e(()=>[c.value?(b(),y(k,{key:0,class:"sliderBox"},{default:e(()=>[n("div",null,[a(I,{title:"字段说明",column:1},{default:e(()=>[a(m,{label:"key"},{default:e(()=>[t(" 作用对象"),Q,t(" 可能的值：Dubbo应用名或者服务名 ")]),_:1}),a(m,{label:"scope"},{default:e(()=>[t(" 规则粒度"),T,t(" 可能的值：application, service ")]),_:1}),a(m,{label:"force"},{default:e(()=>[t(" 容错保护"),j,t(" 可能的值：true, false"),q,t(" 描述：如果为true，则路由筛选后若没有可用的地址则会直接报异常；如果为false，则会从可用地址中选择完成RPC调用 ")]),_:1}),a(m,{label:"runtime"},{default:e(()=>[t(" 运行时生效"),E,t(" 可能的值：true, false"),F,t(" 描述：如果为true，则该rule下的所有路由将会实时生效；若为false，则只有在启动时才会生效 ")]),_:1})]),_:1})])]),_:1})):U("",!0)]),_:1},8,["span"])]),_:1})]),_:1})}}}),oe=H(W,[["__scopeId","data-v-e46a45c3"]]);export{oe as default};
