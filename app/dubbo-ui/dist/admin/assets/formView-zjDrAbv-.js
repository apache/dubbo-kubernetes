import{d as L,k as z,g as H,u as J,b as M,n as O,f as r,c as e,t as a,F as m,x as g,v as _,J as x,e as d,h as S,P as Y,o as i,H as y,y as p,z as v,V as A,W as q,_ as Q}from"./index-ydEeV_dL.js";import{u as X}from"./index-mCCcKxkK.js";const Z={class:"__container_traffic_config_form"},ee={key:0},le={key:1},ae=L({__name:"formView",setup(te){z(o=>({"2bf1b501":S(Y)}));const{appContext:{config:{globalProperties:V}}}=H(),G=J(),K=M(),w=O(G.params.isEdit==="1"),N=X().toClipboard;function W(o){q.success(V.$t("messageDomain.success.copy")),N(o)}const c=O({basicInfo:{ruleName:"org.apache.dubbo.samples.UserService::.condition-router",ruleGranularity:"服务",actionObject:"org.apache.dubbo.samples.UserService",effectTime:"20230/12/19 22:09:34",enabledState:!0},config:[{enabledState:!0,endOfAction:"provider",actuatingRangeKeys:["address"],actuatingRange:[{key:"address",relation:"=",value:"10.255.10.11"}],configItemKeys:["retries"],configItem:[{key:"retries",relation:"=",value:"2"}]}]}),j=["address","providerAddress","service","app","param"],E=["retries","timeout","accesslog","weight","其他"],f=O(c.value),B=[{label:"provider",value:"provider"},{label:"consumer",value:"consumer"}],T=()=>{f.value.config.push({enabledState:!0,endOfAction:"provider",actuatingRange:[],configItem:[]})},R=(o,u)=>{const n=c.value.config[o];n[u]=n[u].filter(b=>n[u+"Keys"].find(h=>h===b.key)),n[u+"Keys"].forEach(b=>{n[u].find(h=>h.key===b)||n[u].push({key:b,relation:"=",value:""})})};return(o,u)=>{const n=d("a-descriptions-item"),b=d("a-descriptions"),h=d("a-select-option"),I=d("a-select"),s=d("a-input"),U=d("a-switch"),$=d("a-card"),C=d("a-input-group"),P=d("a-radio-group"),D=d("a-button"),F=d("a-flex");return i(),r("div",Z,[e($,{title:"基础信息",class:"dynamic-config-card"},{default:a(()=>[w.value?(i(),r("div",le,[e(b,{column:2,layout:"vertical"},{default:a(()=>[e(n,{label:o.$t("flowControlDomain.ruleGranularity"),labelStyle:{fontWeight:"bold"}},{default:a(()=>[e(I,{value:f.value.basicInfo.ruleGranularity,"onUpdate:value":u[2]||(u[2]=t=>f.value.basicInfo.ruleGranularity=t),style:{"min-width":"120px"},disabled:""},{default:a(()=>[e(h,{value:f.value.basicInfo.ruleGranularity},{default:a(()=>[p(v(c.value.basicInfo.ruleGranularity),1)]),_:1},8,["value"])]),_:1},8,["value"])]),_:1},8,["label"]),e(n,{label:o.$t("flowControlDomain.actionObject"),labelStyle:{fontWeight:"bold"}},{default:a(()=>[e(s,{value:f.value.basicInfo.actionObject,"onUpdate:value":u[3]||(u[3]=t=>f.value.basicInfo.actionObject=t),style:{"min-width":"300px"},disabled:""},null,8,["value"])]),_:1},8,["label"]),e(n,{label:o.$t("flowControlDomain.enabledState"),labelStyle:{fontWeight:"bold"}},{default:a(()=>[e(U,{checked:f.value.basicInfo.enabledState,"onUpdate:checked":u[4]||(u[4]=t=>f.value.basicInfo.enabledState=t),"checked-children":"是","un-checked-children":"否"},null,8,["checked"])]),_:1},8,["label"])]),_:1})])):(i(),r("div",ee,[e(b,{column:2,layout:"vertical"},{default:a(()=>[e(n,{label:o.$t("flowControlDomain.ruleName"),labelStyle:{fontWeight:"bold"}},{default:a(()=>[y("p",{onClick:u[0]||(u[0]=t=>W(c.value.ruleName)),class:"description-item-content with-card"},[p(v(c.value.basicInfo.ruleName)+" ",1),e(S(A))])]),_:1},8,["label"]),e(n,{label:o.$t("flowControlDomain.ruleGranularity"),labelStyle:{fontWeight:"bold"}},{default:a(()=>[y("span",null,v(c.value.basicInfo.ruleGranularity),1)]),_:1},8,["label"]),e(n,{label:o.$t("flowControlDomain.actionObject"),labelStyle:{fontWeight:"bold"}},{default:a(()=>[y("p",{onClick:u[1]||(u[1]=t=>W("org.apache.dubbo.samples.UserService")),class:"description-item-content with-card"},[p(v(c.value.basicInfo.actionObject)+" ",1),e(S(A))])]),_:1},8,["label"]),e(n,{label:o.$t("flowControlDomain.effectTime"),labelStyle:{fontWeight:"bold"}},{default:a(()=>[y("span",null,v(c.value.basicInfo.effectTime),1)]),_:1},8,["label"]),e(n,{label:o.$t("flowControlDomain.enabledState"),labelStyle:{fontWeight:"bold"}},{default:a(()=>[y("span",null,v(c.value.basicInfo.enabledState?"启用":"不启用"),1)]),_:1},8,["label"])]),_:1})]))]),_:1}),w.value?(i(!0),r(m,{key:1},g(f.value.config,(t,k)=>(i(),_($,{title:"配置【"+(k+1)+"】",class:"dynamic-config-card"},{default:a(()=>[e(b,{column:2},{default:a(()=>[e(n,{label:o.$t("flowControlDomain.enabledState"),labelStyle:{fontWeight:"bold"}},{default:a(()=>[e(U,{checked:t.enabledState,"onUpdate:checked":l=>t.enabledState=l,"checked-children":"是","un-checked-children":"否"},null,8,["checked","onUpdate:checked"])]),_:2},1032,["label"]),e(n,{label:o.$t("flowControlDomain.endOfAction"),labelStyle:{fontWeight:"bold"}},{default:a(()=>[e(P,{value:t.endOfAction,"onUpdate:value":l=>t.endOfAction=l,options:B},null,8,["value","onUpdate:value"])]),_:2},1032,["label"]),e(n,{label:o.$t("flowControlDomain.actuatingRange"),labelStyle:{fontWeight:"bold"},span:2},{default:a(()=>[y("div",null,[e(I,{ref_for:!0,ref:"select",value:t.actuatingRangeKeys,"onUpdate:value":l=>t.actuatingRangeKeys=l,style:{width:"500px"},onChange:l=>R(k,"actuatingRange"),mode:"multiple",options:j.map(l=>({value:l}))},null,8,["value","onUpdate:value","onChange","options"]),(i(!0),r(m,null,g(t.actuatingRange,l=>(i(),r("div",{key:l.key,style:{"margin-top":"20px"}},[e(C,{compact:""},{default:a(()=>[e(s,{disabled:"",value:l.key,style:{width:"200px"}},null,8,["value"]),e(s,{disabled:"",value:l.relation,style:{width:"50px"}},null,8,["value"]),e(s,{value:l.value,style:{width:"200px"}},null,8,["value"])]),_:2},1024)]))),128))])]),_:2},1032,["label"]),e(n,{label:o.$t("flowControlDomain.configurationItem"),labelStyle:{fontWeight:"bold"},span:2},{default:a(()=>[y("div",null,[e(I,{ref_for:!0,ref:"select",value:t.configItemKeys,"onUpdate:value":l=>t.configItemKeys=l,style:{width:"500px"},onChange:l=>R(k,"configItem"),mode:"multiple",options:E.map(l=>({value:l}))},null,8,["value","onUpdate:value","onChange","options"]),(i(!0),r(m,null,g(t.configItem,l=>(i(),r("div",{key:l.key,style:{"margin-top":"20px"}},[e(C,{compact:""},{default:a(()=>[e(s,{disabled:"",value:l.key,style:{width:"200px"}},null,8,["value"]),e(s,{disabled:"",value:l.relation,style:{width:"50px"}},null,8,["value"]),e(s,{value:l.value,style:{width:"200px"}},null,8,["value"])]),_:2},1024)]))),128))])]),_:2},1032,["label"])]),_:2},1024)]),_:2},1032,["title"]))),256)):(i(!0),r(m,{key:0},g(c.value.config,(t,k)=>(i(),_($,{title:"配置【"+(k+1)+"】",class:"dynamic-config-card"},{default:a(()=>[e(b,{column:2},{default:a(()=>[e(n,{label:o.$t("flowControlDomain.enabledState"),labelStyle:{fontWeight:"bold"}},{default:a(()=>[p(v(t.enabledState?"启用":"不启用"),1)]),_:2},1032,["label"]),e(n,{label:o.$t("flowControlDomain.endOfAction"),labelStyle:{fontWeight:"bold"}},{default:a(()=>[p(v(t.endOfAction),1)]),_:2},1032,["label"]),e(n,{label:o.$t("flowControlDomain.actuatingRange"),labelStyle:{fontWeight:"bold"},span:2},{default:a(()=>[(i(!0),r(m,null,g(t.actuatingRange,l=>(i(),_(C,{compact:"",key:l.key},{default:a(()=>[e(s,{disabled:"",value:l.key,style:{width:"200px"}},null,8,["value"]),e(s,{disabled:"",value:l.relation,style:{width:"50px"}},null,8,["value"]),e(s,{disabled:"",value:l.value,style:{width:"200px"}},null,8,["value"])]),_:2},1024))),128))]),_:2},1032,["label"]),e(n,{label:o.$t("flowControlDomain.configurationItem"),labelStyle:{fontWeight:"bold"},span:2},{default:a(()=>[(i(!0),r(m,null,g(t.configItem,l=>(i(),_(C,{compact:"",key:l.key},{default:a(()=>[e(s,{disabled:"",value:l.key,style:{width:"200px"}},null,8,["value"]),e(s,{disabled:"",value:l.relation,style:{width:"50px"}},null,8,["value"]),e(s,{disabled:"",value:l.value,style:{width:"200px"}},null,8,["value"])]),_:2},1024))),128))]),_:2},1032,["label"])]),_:2},1024)]),_:2},1032,["title"]))),256)),w.value?(i(),_(D,{key:2,onClick:T},{default:a(()=>[p("增加配置")]),_:1})):x("",!0),w.value?(i(),_(F,{key:3,style:{"margin-top":"30px"}},{default:a(()=>[e(D,{type:"primary"},{default:a(()=>[p("确认")]),_:1}),e(D,{style:{"margin-left":"30px"},onClick:u[5]||(u[5]=t=>S(K).push("../../"))},{default:a(()=>[p("取消")]),_:1})]),_:1})):x("",!0)])}}}),ue=Q(ae,[["__scopeId","data-v-0457c381"]]);export{ue as default};
