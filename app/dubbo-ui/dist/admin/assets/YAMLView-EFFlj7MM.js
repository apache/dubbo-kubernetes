import{_ as M}from"./MonacoEditor.vue_vue_type_script_setup_true_lang-PWy6IsrH.js";import{d as N,u as $,n as d,Q as A,f as k,c as a,t as e,v as m,K as V,F as C,e as n,o as u,z as r,B,h as D,a9 as E,aa as O,J as x,y as R,X as Y,G as z,H as F,_ as q}from"./index-WfxyH1kR.js";import{j as G,k as H}from"./traffic-jiWu3d0C.js";import{y as I}from"./js-yaml-lTHa-xT-.js";import"./request-2cLtQ4vm.js";const b=i=>(z("data-v-d410ef67"),i=i(),F(),i),J={class:"editorBox"},K=b(()=>x("p",null,"修改时间: 2024/3/20 15:20:31",-1)),Q=b(()=>x("p",null,"版本号: xo842xqpx834",-1)),T=N({__name:"YAMLView",setup(i){const y=$(),h=d(y.params.isEdit==="1"),o=d(!1),v=d(!1),w=d(8),p=d();A(async()=>{var t;const l=await G({name:(t=y.params)==null?void 0:t.pathId}),s=I.dump(l.data);p.value=s});async function L(){var s;v.value=!0;let l=I.load(p.value);try{let t=await H({name:(s=y.params)==null?void 0:s.pathId},l);Y.success("config save success")}finally{v.value=!1}}return(l,s)=>{const t=n("a-button"),c=n("a-col"),S=n("a-row"),f=n("a-flex"),g=n("a-card"),j=n("a-spin");return u(),k(C,null,[a(g,null,{default:e(()=>[a(j,{spinning:v.value},{default:e(()=>[a(f,{style:{width:"100%"}},{default:e(()=>[a(c,{span:o.value?24-w.value:24,class:"left"},{default:e(()=>[a(f,{vertical:"",align:"end"},{default:e(()=>[a(S,{style:{width:"100%"},justify:"space-between"},{default:e(()=>[a(c,{span:12},{default:e(()=>[a(t,{type:"primary",size:"small",style:{width:"80px",float:"left"},onClick:L},{default:e(()=>[r(B(l.$t("form.save")),1)]),_:1})]),_:1}),a(c,{span:12},{default:e(()=>[a(t,{type:"text",style:{color:"#0a90d5",float:"right","margin-top":"-5px"},onClick:s[0]||(s[0]=_=>o.value=!o.value)},{default:e(()=>[r(B(l.$t("flowControlDomain.versionRecords"))+" ",1),o.value?(u(),m(D(O),{key:1})):(u(),m(D(E),{key:0}))]),_:1})]),_:1})]),_:1}),x("div",J,[a(M,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=_=>p.value=_),theme:"vs-dark",height:500,language:"yaml",readonly:!h.value},null,8,["modelValue","readonly"])])]),_:1})]),_:1},8,["span"]),a(c,{span:o.value?w.value:0,class:"right"},{default:e(()=>[o.value?(u(),m(g,{key:0,class:"sliderBox"},{default:e(()=>[(u(),k(C,null,R(2,_=>a(g,{key:_},{default:e(()=>[K,Q,a(f,{justify:"flex-end"},{default:e(()=>[a(t,{type:"text",style:{color:"#0a90d5"}},{default:e(()=>[r("查看")]),_:1}),a(t,{type:"text",style:{color:"#0a90d5"}},{default:e(()=>[r("回滚")]),_:1})]),_:1})]),_:2},1024)),64))]),_:1})):V("",!0)]),_:1},8,["span"])]),_:1})]),_:1},8,["spinning"])]),_:1}),h.value?(u(),m(f,{key:0,style:{"margin-top":"30px"}},{default:e(()=>[a(t,{type:"primary"},{default:e(()=>[r("确认")]),_:1}),a(t,{style:{"margin-left":"30px"}},{default:e(()=>[r("取消")]),_:1})]),_:1})):V("",!0)],64)}}}),ee=q(T,[["__scopeId","data-v-d410ef67"]]);export{ee as default};
