import{u as ge}from"./index-PjsB4j44.js";import{d as Ce,g as $e,b as Me,n as P,r as Ue,f as L,c as e,t as l,e as T,o as c,z as f,v,h as K,a9 as we,aa as Te,K as q,F as J,y as X,J as V,B as S,I as x,G as De,H as qe,_ as Re}from"./index-3yaHMBuR.js";import{a as Ke}from"./traffic-kHQqjcnF.js";import"./request-8fqjBntA.js";const H=Q=>(De("data-v-4835bb3b"),Q=Q(),qe(),Q),Se={class:"__container_routingRule_detail"},xe={style:{"max-width":"400px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},ze=H(()=>V("br",null,null,-1)),Oe=H(()=>V("br",null,null,-1)),je=H(()=>V("br",null,null,-1)),Be=H(()=>V("br",null,null,-1)),Ee=H(()=>V("br",null,null,-1)),Ve=H(()=>V("br",null,null,-1)),Ae=Ce({__name:"addByFormView",setup(Q){$e();const I=Me(),N=P(!1),Y=P(8);ge().toClipboard;const g=Ue({version:"",ruleGranularity:"",objectOfAction:"",enable:!0,faultTolerantProtection:!1,runtime:!0,priority:null,group:""}),ee=P([{label:"host",value:"host"},{label:"application",value:"application"},{label:"method",value:"method"},{label:"arguments",value:"arguments"},{label:"attachments",value:"attachments"},{label:"其他",value:"other"}]),le=P([{label:"host",value:"host"},{label:"其他",value:"other"}]),A=P([{label:"=",value:"="},{label:"!=",value:"!="}]),ae=P([{label:"应用",value:"application"},{label:"服务",value:"service"}]),p=P([{selectedMatchConditionTypes:[],requestMatch:[],selectedRouteDistributeMatchTypes:[],routeDistribute:[{type:"host",condition:"",value:""},{type:"other",list:[{myKey:"",condition:"",value:""}]}]}]),te=()=>{p.value.push({selectedMatchConditionTypes:[],requestMatch:[],selectedRouteDistributeMatchTypes:[],routeDistribute:[{type:"host",condition:"=",value:"127.0.0.1"},{type:"other",list:[{myKey:"key",condition:"=",value:"value"}]}]})},ne=u=>{p.value.splice(u,1)},se=u=>{p.value[u].requestMatch=[],p.value[u].selectedMatchConditionTypes=[]},oe=u=>{p.value[u].requestMatch=[{type:"host",condition:"",value:""},{type:"application",condition:"",value:""},{type:"method",condition:"",value:""},{type:"arguments",list:[{index:0,condition:"",value:""}]},{type:"attachments",list:[{myKey:"key",condition:"",value:""}]},{type:"other",list:[{myKey:"key",condition:"",value:""}]}]},W=(u,t)=>{p.value[t].selectedMatchConditionTypes=p.value[t].selectedMatchConditionTypes.filter(d=>d!==u)},ue=(u,t)=>{p.value[t].selectedRouteDistributeMatchTypes=p.value[t].selectedRouteDistributeMatchTypes.filter(d=>d!==u)},ie=[{dataIndex:"index",key:"index",title:"参数索引"},{dataIndex:"condition",key:"condition",title:"关系"},{dataIndex:"value",key:"value",title:"值"},{dataIndex:"operation",key:"operation",title:"操作"}],ce=(u,t)=>{p.value[u].requestMatch[t].list.push({index:0,condition:"=",value:""})},de=(u,t,d)=>{p.value[u].requestMatch[t].list.length===1&&(p.value[u].selectedMatchConditionTypes=p.value[u].selectedMatchConditionTypes.filter(_=>_!=="arguments")),p.value[u].requestMatch[t].list.splice(d,1)},re=[{dataIndex:"myKey",key:"myKey",title:"键"},{dataIndex:"condition",key:"condition",title:"关系"},{dataIndex:"value",key:"value",title:"值"},{dataIndex:"operation",key:"operation",title:"操作"}],pe=(u,t)=>{p.value[u].requestMatch[t].list.push({key:"key",condition:"=",value:""})},ve=(u,t,d)=>{p.value[u].requestMatch[t].list.length===1&&(p.value[u].selectedMatchConditionTypes=p.value[u].selectedMatchConditionTypes.filter(_=>_!=="attachments")),p.value[u].requestMatch[t].list.splice(d,1)},Z=[{dataIndex:"myKey",key:"myKey",title:"键"},{dataIndex:"condition",key:"condition",title:"关系"},{dataIndex:"value",key:"value",title:"值"},{dataIndex:"operation",key:"operation",title:"操作"}],ye=(u,t)=>{p.value[u].requestMatch[t].list.push({myKey:"",condition:"=",value:""})},he=(u,t,d)=>{if(p.value[u].requestMatch[t].list.length===1){p.value[u].selectedMatchConditionTypes=p.value[u].selectedMatchConditionTypes.filter(_=>_!=="other");return}p.value[u].requestMatch[t].list.splice(d,1)},fe=(u,t)=>{p.value[u].routeDistribute[t].list.push({myKey:"",condition:"=",value:""})},_e=(u,t,d)=>{if(p.value[u].routeDistribute[t].list.length===1){p.value[u].selectedRouteDistributeMatchTypes=p.value[u].selectedRouteDistributeMatchTypes.filter(_=>_!=="other");return}p.value[u].routeDistribute[t].list.splice(d,1)};function m(u){var k,B;const t=p.value[u],{ruleGranularity:d,objectOfAction:_}=g;let C=`对于${d==="service"?"服务":"应用"}【${_||"未指定"}】`,y=[];(k=t.selectedMatchConditionTypes)==null||k.forEach($=>{var O,G,o,h;const U=(O=t.requestMatch)==null?void 0:O.find(a=>a.type===$);if(!U)return;let r="";const R=U.condition==="="?"等于":U.condition==="!="?"不等于":U.condition||"",z=U.value||"未指定";switch($){case"host":r=`请求来源主机 ${R} ${z}`;break;case"application":r=`请求来源应用 ${R} ${z}`;break;case"method":r=`请求方法 ${R} ${z}`;break;case"arguments":const a=(G=U.list)==null?void 0:G.map(n=>{const E=n.condition==="="?"等于":n.condition==="!="?"不等于":n.condition||"",w=n.value!==void 0&&n.value!==""?n.value:"未指定";return`参数[${n.index}] ${E} ${w}`}).filter(Boolean);(a==null?void 0:a.length)>0&&(r=a.join(" 且 "));break;case"attachments":const b=(o=U.list)==null?void 0:o.map(n=>{const E=n.condition==="="?"等于":n.condition==="!="?"不等于":n.condition||"",w=n.value!==void 0&&n.value!==""?n.value:"未指定";return`附件[${n.myKey||"未指定"}] ${E} ${w}`}).filter(Boolean);(b==null?void 0:b.length)>0&&(r=b.join(" 且 "));break;case"other":const s=(h=U.list)==null?void 0:h.map(n=>{const E=n.condition==="="?"等于":n.condition==="!="?"不等于":n.condition||"",w=n.value!==void 0&&n.value!==""?n.value:"未指定";return`自定义匹配[${n.myKey||"未指定"}] ${E} ${w}`}).filter(Boolean);(s==null?void 0:s.length)>0&&(r=s.join(" 且 "));break}r&&(($==="host"||$==="application"||$==="method")&&!U.value?y.push(`${$==="host"?"请求来源主机":$==="application"?"请求来源应用":"请求方法"} 未填写`):y.push(r))});const j=y.length>0?y.join(" 且 "):"任意请求";let i=[];(B=t.selectedRouteDistributeMatchTypes)==null||B.forEach($=>{var O,G;const U=(O=t.routeDistribute)==null?void 0:O.find(o=>o.type===$);if(!U)return;let r="";const R=U.condition==="="?"等于":U.condition==="!="?"不等于":U.condition||"",z=U.value||"未指定";switch($){case"host":r=`目标主机 ${R} ${z}`;break;case"other":const o=(G=U.list)==null?void 0:G.map(h=>{const a=h.condition==="="?"等于":h.condition==="!="?"不等于":h.condition||"",b=h.value!==void 0&&h.value!==""?h.value:"未指定";return`目标标签[${h.myKey||"未指定"}] ${a} ${b}`}).filter(Boolean);(o==null?void 0:o.length)>0&&(r=o.join(" 且 "));break}r&&($==="host"&&!U.value?i.push("目标主机 未填写"):i.push(r))});const F=i.length>0?`满足 【${i.join(" 且 ")}】`:"默认路由规则";return`${C}，将满足 【${j}】 条件的请求，转发到 ${F} 的实例。`}function ke(){let u=[],t="",d="";return p.value.forEach((_,D)=>{_.selectedMatchConditionTypes.forEach((y,j)=>{_.requestMatch.forEach((i,F)=>{if(y==(i==null?void 0:i.type))switch(i==null?void 0:i.type){case"arguments":i.list.forEach((k,B)=>{t.length>0&&(t+=" & "),t+=`${y}[${k.index}]${k.condition}${k.value}`});break;case"attachments":i.list.forEach((k,B)=>{t.length>0&&(t+=" & "),t+=`${y}[${k.myKey}]${k.condition}${k.value}`});break;case"other":i.list.forEach((k,B)=>{t.length>0&&(t+=" & "),t+=`${y}[${k.myKey}]${k.condition}${k.value}`});break;default:t.length>0&&(t+=" & "),t+=`${i.type}${i.condition}${i.value}`}})}),_.selectedRouteDistributeMatchTypes.forEach((y,j)=>{_.routeDistribute.forEach((i,F)=>{if(y==(i==null?void 0:i.type))switch(i==null?void 0:i.type){case"other":i==null||i.list.forEach((k,B)=>{d.length>0&&(d+=" & "),d+=`${y}[${k.myKey}]${k.condition}${k.value}`});break;default:d.length>0&&(d+=" & "),d+=`${i.type}${i.condition}${i.value}`}})});let C="";t.length>0&&d.length>0?C=`${t} => ${d}`:t.length>0&&d.length==0&&(C=`${t}`),u.push(C)}),u}const be=async()=>{const{version:u,ruleGranularity:t,objectOfAction:d,enable:_,faultTolerantProtection:D,runtime:C,group:y}=g,j={configVersion:"v3.0",scope:t,key:d,enabled:_,force:D,runtime:C,conditions:ke()};let i="";t=="application"?i=`${d}.condition-router`:i=`${d}:${u}:${y}.condition-router`,(await Ke(i,j)).code===200&&I.push("/traffic/routingRule")};return(u,t)=>{const d=T("a-button"),_=T("a-flex"),D=T("a-select"),C=T("a-form-item"),y=T("a-input"),j=T("a-switch"),i=T("a-col"),F=T("a-input-number"),k=T("a-row"),B=T("a-form"),$=T("a-card"),U=T("a-tooltip"),r=T("a-space"),R=T("a-tag"),z=T("a-table"),O=T("a-descriptions-item"),G=T("a-descriptions");return c(),L("div",Se,[e(_,{style:{width:"100%"}},{default:l(()=>[e(i,{span:N.value?24-Y.value:24,class:"left"},{default:l(()=>[e($,null,{default:l(()=>[e(r,{style:{width:"100%"},direction:"vertical",size:"middle"},{default:l(()=>[e(k,null,{default:l(()=>[e(_,{justify:"end",style:{width:"100%"}},{default:l(()=>[e(d,{type:"text",style:{color:"#0a90d5"},onClick:t[0]||(t[0]=o=>N.value=!N.value)},{default:l(()=>[f(" 字段说明 "),N.value?(c(),v(K(Te),{key:1})):(c(),v(K(we),{key:0}))]),_:1})]),_:1}),e($,{title:"基础信息",style:{width:"100%"},class:"_detail"},{default:l(()=>[e(B,{layout:"horizontal"},{default:l(()=>[e(k,{style:{width:"100%"}},{default:l(()=>[e(i,{span:12},{default:l(()=>[e(C,{label:"规则粒度",required:""},{default:l(()=>[e(D,{value:g.ruleGranularity,"onUpdate:value":t[1]||(t[1]=o=>g.ruleGranularity=o),style:{width:"120px"},options:ae.value},null,8,["value","options"])]),_:1}),g.ruleGranularity==="service"?(c(),v(C,{key:0,label:"版本",required:""},{default:l(()=>[e(y,{value:g.version,"onUpdate:value":t[2]||(t[2]=o=>g.version=o),style:{width:"300px"}},null,8,["value"])]),_:1})):q("",!0),e(C,{label:"容错保护"},{default:l(()=>[e(j,{checked:g.faultTolerantProtection,"onUpdate:checked":t[3]||(t[3]=o=>g.faultTolerantProtection=o),"checked-children":"开","un-checked-children":"关"},null,8,["checked"])]),_:1}),e(C,{label:"运行时生效"},{default:l(()=>[e(j,{checked:g.runtime,"onUpdate:checked":t[4]||(t[4]=o=>g.runtime=o),"checked-children":"开","un-checked-children":"关"},null,8,["checked"])]),_:1})]),_:1}),e(i,{span:12},{default:l(()=>[e(C,{label:"作用对象",required:""},{default:l(()=>[e(y,{value:g.objectOfAction,"onUpdate:value":t[5]||(t[5]=o=>g.objectOfAction=o),style:{width:"300px"}},null,8,["value"])]),_:1}),g.ruleGranularity==="service"?(c(),v(C,{key:0,label:"分组",required:""},{default:l(()=>[e(y,{value:g.group,"onUpdate:value":t[6]||(t[6]=o=>g.group=o),style:{width:"300px"}},null,8,["value"])]),_:1})):q("",!0),e(C,{label:"立即启用"},{default:l(()=>[e(j,{checked:g.enable,"onUpdate:checked":t[7]||(t[7]=o=>g.enable=o),"checked-children":"开","un-checked-children":"关"},null,8,["checked"])]),_:1}),e(C,{label:"优先级"},{default:l(()=>[e(F,{value:g.priority,"onUpdate:value":t[8]||(t[8]=o=>g.priority=o),min:"1"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e($,{title:"路由列表",style:{width:"100%"},class:"_detail"},{default:l(()=>[(c(!0),L(J,null,X(p.value,(o,h)=>(c(),v($,null,{title:l(()=>[e(_,{justify:"space-between"},{default:l(()=>[e(r,{align:"center"},{default:l(()=>[V("div",null,"路由【"+S(h+1)+"】",1),e(U,null,{title:l(()=>[f(S(m(h)),1)]),default:l(()=>[V("div",xe,S(m(h)),1)]),_:2},1024)]),_:2},1024),e(K(x),{onClick:a=>ne(h),class:"action-icon",icon:"tdesign:delete"},null,8,["onClick"])]),_:2},1024)]),default:l(()=>[e(B,{layout:"horizontal"},{default:l(()=>[e(r,{style:{width:"100%"},direction:"vertical",size:"large"},{default:l(()=>[e(C,{label:"请求匹配"},{default:l(()=>[o.requestMatch.length>0?(c(),v($,{key:0},{default:l(()=>[e(r,{style:{width:"100%"},direction:"vertical",size:"small"},{default:l(()=>[e(_,{align:"center",justify:"space-between"},{default:l(()=>[e(C,{label:"匹配条件类型"},{default:l(()=>[e(D,{value:o.selectedMatchConditionTypes,"onUpdate:value":a=>o.selectedMatchConditionTypes=a,options:ee.value,mode:"multiple",style:{"min-width":"200px"}},null,8,["value","onUpdate:value","options"])]),_:2},1024),e(K(x),{onClick:a=>se(h),class:"action-icon",icon:"tdesign:delete"},null,8,["onClick"])]),_:2},1024),(c(!0),L(J,null,X(o.requestMatch,(a,b)=>(c(),L(J,null,[o.selectedMatchConditionTypes.includes("host")&&a.type==="host"?(c(),v(r,{key:0,size:"large",align:"center"},{default:l(()=>[e(R,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:l(()=>[f(S(a==null?void 0:a.type),1)]),_:2},1024),e(D,{value:a.condition,"onUpdate:value":s=>a.condition=s,style:{"min-width":"120px"},options:A.value},null,8,["value","onUpdate:value","options"]),e(y,{value:a.value,"onUpdate:value":s=>a.value=s,placeholder:"请求来源ip"},null,8,["value","onUpdate:value"]),e(K(x),{onClick:s=>W(a==null?void 0:a.type,h),class:"action-icon",icon:"tdesign:delete"},null,8,["onClick"])]),_:2},1024)):q("",!0),o.selectedMatchConditionTypes.includes("application")&&a.type==="application"?(c(),v(r,{key:1,size:"large",align:"center"},{default:l(()=>[e(R,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:l(()=>[f(S(a==null?void 0:a.type),1)]),_:2},1024),e(D,{value:a.condition,"onUpdate:value":s=>a.condition=s,style:{"min-width":"120px"},options:A.value},null,8,["value","onUpdate:value","options"]),e(y,{value:a.value,"onUpdate:value":s=>a.value=s,placeholder:"请求来源应用名"},null,8,["value","onUpdate:value"]),e(K(x),{onClick:s=>W(a==null?void 0:a.type,h),class:"action-icon",icon:"tdesign:delete"},null,8,["onClick"])]),_:2},1024)):q("",!0),o.selectedMatchConditionTypes.includes("method")&&a.type==="method"?(c(),v(r,{key:2,size:"large",align:"center"},{default:l(()=>[e(R,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:l(()=>[f(S(a==null?void 0:a.type),1)]),_:2},1024),e(D,{value:a.condition,"onUpdate:value":s=>a.condition=s,style:{"min-width":"120px"},options:A.value},null,8,["value","onUpdate:value","options"]),e(y,{value:a.value,"onUpdate:value":s=>a.value=s,placeholder:"方法值"},null,8,["value","onUpdate:value"]),e(K(x),{onClick:s=>W(a==null?void 0:a.type,h),class:"action-icon",icon:"tdesign:delete"},null,8,["onClick"])]),_:2},1024)):q("",!0),o.selectedMatchConditionTypes.includes("arguments")&&a.type==="arguments"?(c(),v(r,{key:3,style:{width:"100%"},size:"large",align:"start"},{default:l(()=>[e(R,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:l(()=>[f(S(a==null?void 0:a.type),1)]),_:2},1024),e(r,{direction:"vertical"},{default:l(()=>[e(d,{type:"primary",onClick:s=>ce(h,b)},{default:l(()=>[f(" 添加argument ")]),_:2},1032,["onClick"]),e(z,{pagination:!1,columns:ie,"data-source":o.requestMatch[b].list},{bodyCell:l(({column:s,record:n,text:E,index:w})=>[s.key==="index"?(c(),v(y,{key:0,value:n.index,"onUpdate:value":M=>n.index=M,placeholder:"index"},null,8,["value","onUpdate:value"])):s.key==="condition"?(c(),v(D,{key:1,value:n.condition,"onUpdate:value":M=>n.condition=M,options:A.value},null,8,["value","onUpdate:value","options"])):s.key==="value"?(c(),v(y,{key:2,value:n.value,"onUpdate:value":M=>n.value=M,placeholder:"value"},null,8,["value","onUpdate:value"])):s.key==="operation"?(c(),v(r,{key:3,align:"center"},{default:l(()=>[e(K(x),{onClick:M=>de(h,b,w),icon:"tdesign:remove",class:"action-icon"},null,8,["onClick"])]),_:2},1024)):q("",!0)]),_:2},1032,["data-source"])]),_:2},1024)]),_:2},1024)):q("",!0),o.selectedMatchConditionTypes.includes("attachments")&&a.type==="attachments"?(c(),v(r,{key:4,style:{width:"100%"},size:"large",align:"start"},{default:l(()=>[e(R,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:l(()=>[f(S(a==null?void 0:a.type),1)]),_:2},1024),e(r,{direction:"vertical"},{default:l(()=>[e(d,{type:"primary",onClick:s=>pe(h,b)},{default:l(()=>[f(" 添加attachment ")]),_:2},1032,["onClick"]),e(z,{pagination:!1,columns:re,"data-source":o.requestMatch[b].list},{bodyCell:l(({column:s,record:n,text:E,index:w})=>[s.key==="myKey"?(c(),v(y,{key:0,value:n.myKey,"onUpdate:value":M=>n.myKey=M,placeholder:"key"},null,8,["value","onUpdate:value"])):s.key==="condition"?(c(),v(D,{key:1,value:n.condition,"onUpdate:value":M=>n.condition=M,options:A.value},null,8,["value","onUpdate:value","options"])):s.key==="value"?(c(),v(y,{key:2,value:n.value,"onUpdate:value":M=>n.value=M,placeholder:"value"},null,8,["value","onUpdate:value"])):s.key==="operation"?(c(),v(r,{key:3,align:"center"},{default:l(()=>[e(K(x),{onClick:M=>ve(h,b,w),icon:"tdesign:remove",class:"action-icon"},null,8,["onClick"])]),_:2},1024)):q("",!0)]),_:2},1032,["data-source"])]),_:2},1024)]),_:2},1024)):q("",!0),o.selectedMatchConditionTypes.includes("other")&&a.type==="other"?(c(),v(r,{key:5,style:{width:"100%"},size:"large",align:"start"},{default:l(()=>[e(R,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:l(()=>[f(S((a==null?void 0:a.type)=="other"?"其他":a==null?void 0:a.type),1)]),_:2},1024),e(r,{direction:"vertical"},{default:l(()=>[e(d,{type:"primary",onClick:s=>ye(h,b)},{default:l(()=>[f(" 添加other ")]),_:2},1032,["onClick"]),e(z,{pagination:!1,columns:Z,"data-source":o.requestMatch[b].list},{bodyCell:l(({column:s,record:n,text:E})=>[s.key==="myKey"?(c(),v(y,{key:0,value:n.myKey,"onUpdate:value":w=>n.myKey=w,placeholder:"key"},null,8,["value","onUpdate:value"])):s.key==="condition"?(c(),v(D,{key:1,value:n.condition,"onUpdate:value":w=>n.condition=w,options:A.value},null,8,["value","onUpdate:value","options"])):s.key==="value"?(c(),v(y,{key:2,value:n.value,"onUpdate:value":w=>n.value=w,placeholder:"value"},null,8,["value","onUpdate:value"])):s.key==="operation"?(c(),v(r,{key:3,align:"center"},{default:l(()=>[e(K(x),{onClick:w=>he(h,b,n.index),icon:"tdesign:remove",class:"action-icon"},null,8,["onClick"])]),_:2},1024)):q("",!0)]),_:2},1032,["data-source"])]),_:2},1024)]),_:2},1024)):q("",!0)],64))),256))]),_:2},1024)]),_:2},1024)):(c(),v(d,{key:1,onClick:a=>oe(h),type:"dashed",size:"large"},{icon:l(()=>[e(K(x),{icon:"tdesign:add"})]),default:l(()=>[f(" 增加匹配条件 ")]),_:2},1032,["onClick"]))]),_:2},1024),e(C,{label:"路由分发",required:""},{default:l(()=>[e($,null,{default:l(()=>[e(r,{style:{width:"100%"},direction:"vertical",size:"small"},{default:l(()=>[e(_,null,{default:l(()=>[e(C,{label:"匹配条件类型"},{default:l(()=>[e(D,{value:o.selectedRouteDistributeMatchTypes,"onUpdate:value":a=>o.selectedRouteDistributeMatchTypes=a,options:le.value,mode:"multiple",style:{"min-width":"200px"}},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1024),(c(!0),L(J,null,X(o.routeDistribute,(a,b)=>(c(),L(J,{key:b},[o.selectedRouteDistributeMatchTypes.includes("host")&&a.type==="host"?(c(),v(r,{key:0,size:"large",align:"center"},{default:l(()=>[e(R,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:l(()=>[f(S(a==null?void 0:a.type),1)]),_:2},1024),e(D,{value:a.condition,"onUpdate:value":s=>a.condition=s,style:{"min-width":"120px"},options:A.value},null,8,["value","onUpdate:value","options"]),e(y,{value:a.value,"onUpdate:value":s=>a.value=s,placeholder:"请求来源ip"},null,8,["value","onUpdate:value"]),e(K(x),{onClick:s=>ue(a==null?void 0:a.type,h),class:"action-icon",icon:"tdesign:delete"},null,8,["onClick"])]),_:2},1024)):q("",!0),o.selectedRouteDistributeMatchTypes.includes("other")&&a.type==="other"?(c(),v(r,{key:1,style:{width:"100%"},size:"large",align:"start"},{default:l(()=>[e(R,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:l(()=>[f(S((a==null?void 0:a.type)=="other"?"其他":a==null?void 0:a.type),1)]),_:2},1024),e(r,{direction:"vertical"},{default:l(()=>[e(d,{type:"primary",onClick:s=>fe(h,b)},{default:l(()=>[f(" 添加其他 ")]),_:2},1032,["onClick"]),e(z,{pagination:!1,columns:Z,"data-source":o.routeDistribute[b].list},{bodyCell:l(({column:s,record:n,text:E,index:w})=>[s.key==="myKey"?(c(),v(y,{key:0,value:n.myKey,"onUpdate:value":M=>n.myKey=M,placeholder:"key"},null,8,["value","onUpdate:value"])):s.key==="condition"?(c(),v(D,{key:1,value:n.condition,"onUpdate:value":M=>n.condition=M,options:A.value},null,8,["value","onUpdate:value","options"])):s.key==="value"?(c(),v(y,{key:2,value:n.value,"onUpdate:value":M=>n.value=M,placeholder:"value"},null,8,["value","onUpdate:value"])):s.key==="operation"?(c(),v(r,{key:3,align:"center"},{default:l(()=>[e(K(x),{onClick:M=>_e(h,b,w),icon:"tdesign:remove",class:"action-icon"},null,8,["onClick"])]),_:2},1024)):q("",!0)]),_:2},1032,["data-source"])]),_:2},1024)]),_:2},1024)):q("",!0)],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(d,{onClick:te,type:"primary"},{default:l(()=>[f(" 增加路由")]),_:1})]),_:1})]),_:1})]),_:1},8,["span"]),e(i,{span:N.value?Y.value:0,class:"right"},{default:l(()=>[N.value?(c(),v($,{key:0,class:"sliderBox"},{default:l(()=>[V("div",null,[e(G,{title:"字段说明",column:1},{default:l(()=>[e(O,{label:"key"},{default:l(()=>[f(" 作用对象"),ze,f(" 可能的值：Dubbo应用名或者服务名 ")]),_:1}),e(O,{label:"scope"},{default:l(()=>[f(" 规则粒度"),Oe,f(" 可能的值：application, service ")]),_:1}),e(O,{label:"force"},{default:l(()=>[f(" 容错保护"),je,f(" 可能的值：true, false"),Be,f(" 描述：如果为true，则路由筛选后若没有可用的地址则会直接报异常；如果为false，则会从可用地址中选择完成RPC调用 ")]),_:1}),e(O,{label:"runtime"},{default:l(()=>[f(" 运行时生效"),Ee,f(" 可能的值：true, false"),Ve,f(" 描述：如果为true，则该rule下的所有路由将会实时生效；若为false，则只有在启动时才会生效 ")]),_:1})]),_:1})])]),_:1})):q("",!0)]),_:1},8,["span"])]),_:1}),e($,{class:"footer"},{default:l(()=>[e(_,null,{default:l(()=>[e(d,{type:"primary",onClick:be},{default:l(()=>[f("确认")]),_:1}),e(d,{style:{"margin-left":"30px"},onClick:t[9]||(t[9]=o=>console.log(p.value))},{default:l(()=>[f(" 取消")]),_:1})]),_:1})]),_:1})])}}}),Le=Re(Ae,[["__scopeId","data-v-4835bb3b"]]);export{Le as default};
